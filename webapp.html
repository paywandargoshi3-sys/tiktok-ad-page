<!DOCTYPE html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <title>Ad • 5s</title>
    <style>
        body { margin: 0; font-family: Arial; background: #111; color: #fff; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; }
        #countdown { font-size: 72px; font-weight: bold; }
        #text { font-size: 24px; margin-bottom: 20px; }
    </style>
    <script src='https://telegram.org/js/telegram-web-app.js'></script>
</head>
<body>
    <div id='overlay'>
        <div id='text'>Please wait</div>
        <div id='countdown'>5</div>
        <div id='text'>seconds</div>
    </div>
    <script>
        let count = 5;
        const countdown = document.getElementById('countdown');
        
        // Prevent closing during countdown
        Telegram.WebApp.onEvent('beforeClose', (e) => {
            if (count > 0) {
                Telegram.WebApp.showAlert('Wait for countdown!');
                e.preventDefault();
            }
        });

        const timer = setInterval(() => {
            count--;
            countdown.textContent = count;
            if (count <= 0) {
                clearInterval(timer);
                document.getElementById('overlay').style.display = 'none';
                Telegram.WebApp.sendData('done');
                setTimeout(() => Telegram.WebApp.close(), 500);
            }
        }, 1000);
    </script>
</body>
</html>
